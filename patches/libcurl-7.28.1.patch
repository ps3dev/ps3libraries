diff --git a/src/tool_dirhie.c b/src/tool_dirhie.c
--- a/src/tool_dirhie.c
+++ b/src/tool_dirhie.c
@@ -122,7 +122,6 @@ static int create_dir_hierarchy(const char *outfile, FILE *errors)
        if not ending with DIR_CHAR, we need to prune it */
     if(tempdir2 != NULL) {
       size_t dlen = strlen(dirbuildup);
-      struct stat st;
       if(dlen)
         sprintf(&dirbuildup[dlen], "%s%s", DIR_CHAR, tempdir);
       else {
@@ -131,7 +130,7 @@ static int create_dir_hierarchy(const char *outfile, FILE *errors)
         else
           sprintf(dirbuildup, "%s%s", DIR_CHAR, tempdir);
       }
-      if(stat(dirbuildup, &st) == -1) {
+      if(access(dirbuildup, F_OK) == -1) {
         if(-1 == mkdir(dirbuildup,(mode_t)0000750)) {
           show_dir_errno(errors, dirbuildup);
           result = CURLE_WRITE_ERROR;

